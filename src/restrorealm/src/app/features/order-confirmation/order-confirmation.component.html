<div class="confirmation-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner"></div>
    <p>Loading order details...</p>
  </div>

  <!-- Order Confirmation Card -->
  <div *ngIf="!isLoading" class="confirmation-card">
    <div class="confirmation-header">
      <div class="success-icon-container">
        <svg class="success-icon" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
      </div>
      <h1>Order Confirmed!</h1>
      <p class="order-id">Order #{{ order.orderNumber }}</p>
    </div>

    <div class="order-summary">
      <div class="order-details">
        <div class="detail-section">
          <h3>Delivery Details</h3>
          <p><strong>Estimated Delivery:</strong> {{ estimatedDeliveryTime | date:'short' }}</p>
          <p><strong>Delivery Address:</strong> {{ deliveryAddress }}</p>
        </div>
        
        <div class="detail-section">
          <h3>Customer Information</h3>
          <p>{{ order.customerName }}</p>
          <p>{{ order.customerPhone }}</p>
          <p>{{ order.customerEmail }}</p>
        </div>
      </div>

      <div class="order-items">
        <h3>Order Items</h3>
        <div class="item-list">
          <div *ngFor="let item of order.orderItems" class="item">
            <div class="item-info">
              <span class="item-name">{{ item.menuItemName }}</span>
              <span class="item-quantity">x {{ item.quantity }}</span>
            </div>
            <span class="item-price">${{ (item.quantity * item.price) | number:'1.2-2' }}</span>
          </div>
        </div>
      </div>

      <div class="order-totals">
        <div class="total-row"  *ngIf="order.subtotal">
          <span>Subtotal</span>
          <span>${{ order.subtotal | number:'1.2-2' }}</span>
        </div>
        <div class="total-row" *ngIf="order.taxAmount">
          <span>Tax</span>
          <span>${{ order.taxAmount | number:'1.2-2' }}</span>
        </div>
        <div class="total-row" *ngIf="order.deliveryFee">
          <span>Delivery Fee</span>
          <span>${{ order.deliveryFee | number:'1.2-2' }}</span>
        </div>
        <div class="total-row total-highlight">
          <span>Total</span>
          <span>${{ order.totalAmount | number:'1.2-2' }}</span>
        </div>
      </div>
    </div>

    <div class="order-actions">
      <div class="action-buttons">
        <button (click)="downloadReceipt()" class="btn btn-outline">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zm-8 2V5h2v6h1.17L12 9.83 10.83 11H12zm-6 7h14v2H6z"/>
          </svg>
          Download Receipt
        </button>
        <button (click)="shareOrder()" class="btn btn-outline">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
          </svg>
          Share Order
        </button>
      </div>
      <div class="continue-shopping">
        <a routerLink="/menu" class="btn btn-primary">
          Continue Shopping
        </a>
      </div>
    </div>
  </div>

  <div class="order-notification">
    <p>ðŸŽ‰ A confirmation email has been sent to {{ order.customerEmail }}</p>
  </div>
</div>
